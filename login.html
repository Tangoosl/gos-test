<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–í—Ö–æ–¥</title>
</head>
<body>
  <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
  <input type="text" id="login" placeholder="–õ–æ–≥–∏–Ω"><br><br>
  <input type="password" id="accessCode" placeholder="–ü–∞—Ä–æ–ª—å"><br><br>
  <button onclick="login()">–í–æ–π—Ç–∏</button>
  <p id="error" style="color:red;"></p>

  <script>
    async function login() {
      const login = document.getElementById('login').value.trim();
      const code = document.getElementById('accessCode').value.trim();

      // –ó–∞–º–µ–Ω–∏—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∞—à—É –∏–∑ Google Apps Script
      const url = "https://script.google.com/macros/s/–í–ê–®–ê_–°–°–´–õ–ö–ê/exec?login=" + encodeURIComponent(login) + "&code=" + encodeURIComponent(code);
      const response = await fetch(url);
      const result = await response.json();

      if (result.access) {
        localStorage.setItem("access_granted", "true");
        window.location.href = "test.html";  // üëâ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å —Ç–µ—Å—Ç–æ–º
      } else {
        document.getElementById("error").textContent = "–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å";
      }
    }
  </script>
</body>
</html>
